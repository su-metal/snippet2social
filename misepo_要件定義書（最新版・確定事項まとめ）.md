# Misepo 要件定義書（最新版・確定事項まとめ）

最終更新: 2025-12-28

---

## 1. 目的とコンセプト

### 1.1 アプリの目的
飲食店オーナー／スタッフが、SNS投稿・告知文・Google Maps 返信文などを「爆速で作る」ための文章生成ツール。

### 1.2 コア価値
- とにかく最初に「使える」と思わせる（初回体験の成功確率を上げる）
- 店長の実務（忙しい現場）で、文章作成の摩擦を減らす
- AIの提案は編集前提（AIの小さな誤り・微調整が現場で必ず起きる）

### 1.3 UX原則
- 編集できない仕様はNG（ツールとして未完成に見える／意地悪に見える）
- Proの価値は「入力の許可」ではなく「高度なAI支援（時短・自動化）」に置く
- 無料でもまず成立する体験（ただし強力な追加支援はProで開放）

---

## 2. ターゲット

- 飲食店のオーナー／店長／スタッフ
- SNS運用は素人〜ライト層（言語化が苦手、忙しい）
- 文章の正確性・丁寧さ・失礼のない表現を重視

---

## 3. 出力言語（2言語展開）

### 3.1 対象
- 日本語（ja）
- 英語（en）

### 3.2 UI言語の決定ルール（自動判別）
優先順位:
1. URLクエリ `?lang=ja` / `?lang=en`
2. `localStorage`（例: `app_lang`）
3. `navigator.language`

### 3.3 UI切替導線
- 既存の DEV TOOLS に「言語切替トグル（ja/en）」を設置
- トグル操作で `localStorage` と URL の `?lang=` を同期

### 3.4 i18nパイプライン方針
- `app/i18n/` に辞書と `translate()` を集約
- キー追加が型に自動追従する仕組みを優先
- page等のサーバー寄りコンポーネントは「小さな client helper（LocalizedText）」等でUI更新を保証

---

## 4. UI/機能スコープ（MVP）

### 4.1 UI変更方針
- デザイン（クラス/配置/色/余白など）の変更は禁止
- UI上の削除は「見せない」だけ（将来復活できるようロジックやパイプラインは残す）

### 4.2 プラットフォーム選択
- 既存のプラットフォーム選択UIを維持
- Google Mapが大ボタン扱いではなく「選択状態による見え方」

### 4.3 Multi-Post ボタン
- Multi-Post は残す
- 表記は「Multi-Post (X + Instagram)」を採用
- ボタンラベルは2行にする（UI内で視認性向上）

### 4.4 PC/タブレットの右余白最適化
- 方式B: 余白を「ボタン間のスペース」に変換し、横幅を使い切る
- 実装は grid/flex の gap/columns 調整で対応

---

## 5. 投稿の目的（Intent）

### 5.1 SNS向け Intent（UI表示は4択）
- 📣 宣伝・告知（Promotion）
- 💡 豆知識・コツ（Educational）
- 📖 日常・裏側（Story）
- ❓ 問いかけ（Engagement）

### 5.2 Default（指定なし）
- 「指定なし」ボタンはUIに出さない
- 何も選ばない場合は内部的にデフォルト扱い

### 5.3 「お礼・報告」について
- UI上は非表示
- 将来的に「隠しモード」として自動判定（キーワード等）で補正可能

---

## 6. 生成ロジック（LLMプロンプト設計）

### 6.1 発信者視点（Perspective）
- 視点は1本化
- すべて「飲食店の公式アカウント（店主／スタッフ）」として生成
- 第三者視点（レビュー／発見／おすすめ口調）を厳格に禁止

#### 6.1.1 第三者視点禁止（例）
- 「見つけました」「行ってきました」「この店は」などのレビュー口調は禁止
- 必ず「当店／私たち／店主」視点にする

### 6.2 トーン設定
- スライダーで指定した
  - ユーモアレベル
  - 感情・共感レベル
  を崩さない

### 6.3 3パターン生成（Variant）
- 3パターンは「トーンを変えずに」差を出す
- 差分の出し方:
  - 構成（結論→根拠→CTA など）
  - 情報の並べ方
  - 冒頭フックと締め（CTA）の違い
  - 行間・リズム
- 禁止:
  - トーン（ユーモア/共感）を上下させて差を作る
  - 同じ言い回しの使い回し

### 6.4 長さ（short/medium/long）
- short/medium/long は必ず効かせる
- プラットフォームごとに hard target を設定し、逸脱時はリライト

---

## 7. Multi-Post（X + Instagram）

### 7.1 目的
X と Instagram に最適化された文章を「同時に」生成する。

### 7.2 長さ設定
- lengthOption は Multi-Post でも有効
- X/Instagram それぞれに別の長さガイドを適用

### 7.3 同一文面の禁止
- X/Instagramで同一文面・同一フレーズの再利用は禁止
- 「意味のある差（構造・語彙・トーン）」を必須とする
- 出力前に self-check を要求

### 7.4 出力形式
- Strictly valid JSON
- フィールド（例）:
  - twitter.text
  - instagram.caption

---

## 8. Google Maps 返信

- 入力は Google Maps review として扱う
- 誠実・非プロモーション
- ハッシュタグ禁止、過度な絵文字禁止
- 連絡要求（DM/電話/メール等）禁止
- 意図: THANK_YOU / APOLOGY / ANSWER / AUTO
- 目的に応じた構造テンプレあり

---

## 9. 課金方針（現時点の合意）

- 無料とProは「ユーザーが楽になる（時短・支援が増える）」軸で分ける
- 編集機能は無料でも必須（ロックはNG）

### 9.1 X Thread / X Premium 長文
- 機能自体は実装可能だが、Ver1では一旦UIから外す（露出を消す）方針
- 将来、ユーザー要望や自動投稿連携のタイミングで Pro 機能として解禁候補

---

## 10. 実装上の制約・運用ルール

- デザイン変更は禁止（クラス/配置/色/余白は触らない）
- UI上の機能削除は「非表示化」で対応（ロジックは残す）
- Codexへ渡す指示は「要件とタスクのみ」を基本
- スクショはCodexに渡さない（テキスト指示で完結させる）

---

## 11. 未決（今後の拡張余地）

- 「お礼・報告」自動補正の実装（キーワードトリガー設計）
- 投稿目的（Intent）の英語UI表記・説明文
- 既存UI全体の辞書化（i18nカバレッジの拡張）
- 自動投稿連携（スレッド/長文の本格解禁条件）

